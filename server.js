!function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="S:\\Development\\LambdaSchool\\JavaScript\\Week_7\\Mongo-I",t(t.s=0)}([function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleUserError=void 0;var n=r(3),s=o(n),l=r(4),i=(o(l),r(2)),u=o(i),a=r(5),d=o(a),c=(r(1),r(8)),f=(0,s.default)();u.default.Promise=global.Promise,u.default.connect("mongodb://localhost/mongoi",{useMongoClient:!0}),f.use(d.default.json()),f.use(s.default.static("public",{index:!1})),f.get("/",function(e,t){return t.redirect("/posts")}),f.get("/users",c.getUsers),f.get("/users/:id",c.getUserByID),f.post("/users",c.postUser),f.delete("/users/:id",c.deleteUserByID),f.get("/posts",c.getPosts),f.get("/posts/:id",c.getPostByID),f.post("/posts",c.postPost),f.delete("/posts/:id",c.deletePostByID),f.listen(3e3),console.log("Server running at http:/localhost/:3000"),t.default=f;t.handleUserError=function(e,t){t.status(422).send(e)}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Post=t.User=void 0;var n=r(6),s=o(n),l=r(7),i=o(l);t.User=s.default,t.Post=i.default},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),n=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n.default.Schema,l=new s({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},username:{type:String,required:!0,unique:!0},joinDate:{type:Date,default:Date.now},bio:{type:String,default:""}});t.default=n.default.model("User",l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),n=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n.default.Schema,l=new s({author:{type:String,required:!0},title:{type:String,required:!0},content:{type:String,required:!0},postDate:{type:Date,default:Date.now},tags:{type:String,default:""}});t.default=n.default.model("Post",l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(9);Object.defineProperty(t,"getUsers",{enumerable:!0,get:function(){return o.getUsers}}),Object.defineProperty(t,"getUserByID",{enumerable:!0,get:function(){return o.getUserByID}}),Object.defineProperty(t,"getPosts",{enumerable:!0,get:function(){return o.getPosts}}),Object.defineProperty(t,"getPostByID",{enumerable:!0,get:function(){return o.getPostByID}});var n=r(10);Object.defineProperty(t,"postUser",{enumerable:!0,get:function(){return n.postUser}}),Object.defineProperty(t,"postPost",{enumerable:!0,get:function(){return n.postPost}});var s=r(11);Object.defineProperty(t,"deleteUserByID",{enumerable:!0,get:function(){return s.deleteUserByID}}),Object.defineProperty(t,"deletePostByID",{enumerable:!0,get:function(){return s.deletePostByID}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPostByID=t.getPosts=t.getUserByID=t.getUsers=void 0;var o=r(1),n=r(0);t.getUsers=function(e,t){console.log("======/users | GET======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin);var r=[];o.User.find().exec(function(e,o){if(null!=o&&o.forEach(function(e){return r.push(e)}),0===r.length)return t.send({umm:"Well... This is awkward."});t.send({users:r})})},t.getUserByID=function(e,t){console.log("======/users/:id | GET======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Params: "+JSON.stringify(e.params)),o.User.findOne().where("_id").equals(e.params.id).exec(function(e,r){if(null!=r)return t.send(r);(0,n.handleUserError)({error:"If you think they're a real person now, I promise they're still in you're head. Get some real friends."},t)})},t.getPosts=function(e,t){console.log("======/posts | GET======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin);var r=[];o.Post.find().exec(function(e,o){if(null!=o&&o.forEach(function(e){return r.push(e)}),0===r.length)return t.send({umm:"Well... This is awkward."});t.send({posts:r})})},t.getPostByID=function(e,t){console.log("======/posts/:id | GET======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Params: "+JSON.stringify(e.params)),o.Post.findOne().where("_id").equals(e.params.id).exec(function(e,r){if(null!=r)return t.send(r);(0,n.handleUserError)({error:"LOL! Who told you to look that up?"},t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postPost=t.postUser=void 0;var o=r(1),n=r(0);t.postUser=function(e,t){console.log("======/users | POST======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Data: "+JSON.stringify(e.body));var r=e.body,s=r.username,l=r.email,i=r.password,u=r.first_name,a=r.last_name,d=r.bio,c=[];if(null==s&&c.push("username"),null==l&&c.push("email"),null==i&&c.push("password"),null==u&&c.push("first_name"),null==a&&c.push("last_name"),c.length>0)return(0,n.handleUserError)({error:"You are missing some real serious data.",missing:c},t);new o.User({username:s,email:l,password:i,first_name:u,last_name:a,bio:d}).save(function(e,r){if(e)return(0,n.handleUserError)(e,t);t.json(r)})},t.postPost=function(e,t){console.log("======/posts | POST======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Data: "+JSON.stringify(e.body));var r=e.body,s=r.author,l=r.title,i=r.content,u=r.tags,a=[];if(null==s&&a.push("author"),null==l&&a.push("title"),null==i&&a.push("content"),a.length>0)return(0,n.handleUserError)({error:"You are missing some real serious data.",missing:a},t);new o.Post({author:s,title:l,content:i,tags:u}).save(function(e,r){if(e)return(0,n.handleUserError)(e,t);t.json(r)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deletePostByID=t.deleteUserByID=void 0;var o=r(1),n=r(0);t.deleteUserByID=function(e,t){console.log("======/users/:id | DELETE======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Params: "+JSON.stringify(e.params)),o.User.findOne().where("_id").equals(e.params.id).exec(function(e,r){if(null!=r)return o.User.deleteOne(r).then(function(e,o){return t.send({action:"DELETE",user:r,result:o})});(0,n.handleUserError)({error:"I really wanted to delete them, but they aren't even real. I am disappoint :("},t)})},t.deletePostByID=function(e,t){console.log("======/posts/:id | DELETE======"),console.log("  Request: "+e.originalUrl),console.log("  From: "+e.headers.origin),console.log("  Params: "+JSON.stringify(e.params)),o.Post.findOne().where("_id").equals(e.params.id).exec(function(e,r){if(null!=r)return o.Post.deleteOne(r).then(function(e,o){return t.send({action:"DELETE",post:r,result:o})});(0,n.handleUserError)({error:"Sorry, couldn't find it. :( Loser."},t)})}}]);